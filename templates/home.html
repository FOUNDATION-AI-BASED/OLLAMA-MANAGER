{% extends "base.html" %}
{% block content %}
<h1>Home</h1>
<p>OS: {{ os_type }}</p>
<p>Ollama Installed: {{ ollama_installed }}</p>
<p>Installed Version: {{ installed_version }}</p>

{% if redirect_to_install %}
    <script>
        setTimeout(function() {
            window.location.href = "{{ url_for('install') }}";
        }, 10000);  // Redirect to install page after 10 seconds
    </script>
    <p>Ollama is not installed. Redirecting to the install page in 10 seconds...</p>
{% endif %}

<!-- Info Box -->
{% if not ollama_installed or not redirect_to_install %}
    <div class="alert alert-info" role="alert">
        If you see this message, it means that Ollama is stopped. Please start Ollama using the "Start" button below!
    </div>
{% endif %}

<h2>Start Ollama Service</h2>
<form action="{{ url_for('start_ollama') }}" method="post">
    <div class="form-group">
        <label for="host">Host:</label>
        <input type="text" id="host" name="host" value="localhost" class="form-control">
    </div>
    <div class="form-group">
        <label for="port">Port:</label>
        <input type="text" id="port" name="port" value="11434" class="form-control">
    </div>
    <div class="form-group">
        <label for="model_dir">Model Directory:</label>
        <input type="text" id="model_dir" name="model_dir" value="~/.ollama/models" class="form-control">
    </div>
    <button type="submit" class="btn btn-primary">Start</button>
</form>

<form action="{{ url_for('stop_ollama') }}" method="post">
    <button type="submit" class="btn btn-danger">Stop</button>
</form>
{% endblock %}
